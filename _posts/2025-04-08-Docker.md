---
title: "Docker overview"
excerpt: "command, file structure, compose, example code with flask"

categories:
  - categories1
tags:
  - [tag1, tag2]

permalink: /categories1/Docker overview/

toc: true
toc_sticky: true

date: 2025-04-08
last_modified_at: 2025-04-08
---


# Docker Overview

<aside>
ğŸ’¡

Docker â‰  VM(Virtual machine). Docker is based on **Image and Container.** Image is a kind of program, Contatiner is a kind of process / environment.

</aside>

### Concept & Terms

- Image ì§‘ ì„¤ê³„ë„
- contatiner ì§‘
- docker hub
- dockerfile
- volume ì°½ê³  ì¦‰ volume mount ë€ ì™¸ë¶€ ì €ì¥ì†Œì— ë°ì´í„°ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒ - ì»¨í…Œì´ë„ˆê°€ ì‚­ì œë˜ì–´ë„ ë°ì´í„°ê°€ ìœ ì§€ë¨.
- composer ë‹¨ì§€ ê´€ë¦¬ í˜• â€¦ contatinerë¥¼ í•œ ë²ˆì— ê´€ë¦¬í•˜ëŠ” ë„êµ¬. ex) web + db + cache í•œë²ˆì— ê´€ë¦¬ ê°€ëŠ¥
- port forwarding

### Why docker?

- Environment consistency
    - protability from Env consistency
- Resource Efficiency
    - lighter than VM
    - less memory, cpu
- scalability
    - easy horizontal scaling
    - **so ideal for microservices architecture**
    - dynamic resource allocation
- Isolaed Environments
    - provents application interference
    - security
    - dependency conflicts resolving
    - modular application design
- Deployment speed
    - simplifiles CI/CD pipelines
    - les build and deployment times
- version management
- development productivity / cost optimization / monitoring / logging â€¦ / performance anlaysis..

---

### Basic command

```bash
docker pull # download image
docker image # list up images
docker run [option] image [command] [ARG...]
docker run -p 8888:80 -v ~/Desktop/....
docker run -it # interactive, tty ì§€ì†ì ìœ¼ë¡œ ì—°ê²°
docker build # build images
docker ps # check excuting containers
docker ps -a # check all the excuting containers
docker logs # log check
docker logs -f # log check real-time
docker rm # rmi 
docker stop 

docker-compose up --build
docker-compose down
```

### Dockerfile structure

```docker
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install
CMD ['python', 'app.py']
EXPOSE 
ENV
```

### Docker compose yaml ex

```docker
version: '3'
services:
  web:
    build: 
      context: ..
      dockerfile: docker/Dockerfile
    ports:
      - "5000:5000"
    environment:
      - DB_USER=myuser
      - DB_PASSWORD=mypassword
      - DB_HOST=db
      - DB_PORT=5432
      - DB_NAME=networkproject
    depends_on:
      - db
    volumes:
      - .. :/app

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=networkproject
      - POSTGRES_USER=myuser
      - POSTGRES_PASSWORD=mypassword
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  postgres_data:
```

```docker
version: '3'
- Docker Compose íŒŒì¼ ë²„ì „
- í˜¸í™˜ì„±ê³¼ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°ëŠ¥ ì •ì˜
- ì£¼ìš” ë²„ì „: 2, 3, 3.8 ë“±
services:
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•˜ëŠ” ì»¨í…Œì´ë„ˆë“¤
- ì—¬ê¸°ì„œëŠ” 2ê°œì˜ ì„œë¹„ìŠ¤ ì •ì˜
  1. web (Flask ì• í”Œë¦¬ì¼€ì´ì…˜)
  2. db (PostgreSQL ë°ì´í„°ë² ì´ìŠ¤)
  web:
    build: 
      context: .. 
      dockerfile: docker/Dockerfile
- ìƒìœ„ ë””ë ‰í† ë¦¬ ë„ì»¤ íŒŒì¼ ì‚¬ìš©í•´ì„œ ì´ë¯¸ì§€ ë¹Œë“œ 
    ports:
      - "5000:5000"
- í˜¸ìŠ¤íŠ¸ : ì»¨í…Œì´ë„ˆ í¬íŠ¸í¬ì›Œë”©
    environment:
      - DB_USER=myuser
      - DB_PASSWORD=mypassword
      - DB_HOST=db
      - DB_PORT=5432
      - DB_NAME=networkproject
- ì»¨í…Œì´ë„ˆ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
- DB ì •ë³´ ì „ë‹¬
    depends_on:
      - db
- ì˜ì¡´ì„± ì •ì˜, ì‹¤í–‰ìˆœì„œ ë³´ì¥ -> ì—¬ê¸°ì„œëŠ” db ë¨¼ì € ì‹œì‘ í›„ web ì‹œì‘
    volumes:
      - .. :/app
- í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì— ë§ˆìš´íŠ¸
- ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì˜ /appì— ì—°ê²°
  db:
    image: postgres:13 # ë„ì»¤í—ˆë¸Œì—ì„œ í™•ì¸ê°€ëŠ¥í•œ postgreSQL ê³µì‹ ì´ë¯¸ì§€
    environment:
      - POSTGRES_DB=networkproject
      - POSTGRES_USER=myuser
      - POSTGRES_PASSWORD=mypassword
    volumes:
      - postgres_data:/var/lib/postgresql/data
- ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘í•´ë„ ìœ ì§€ë˜ë„ë¡ ì €ì¥ 
    ports:
      - "5432:5432"

volumes:
  postgres_data:
- ë„ì»¤ ë³¼ë¥¨ ì •ì‹ ì„ ì–¸ .ë°ì´í„° ì§€ì†ì„±ì„ ìœ„í•´ì„œ ë³¼ë¥¨ ìƒì„±
```
